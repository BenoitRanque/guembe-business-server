(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1624f3c6"],{"4e53":function(e,t,n){var i=n("e916");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("0d7b84c8",i,!1,{sourceMap:!1})},"5fa6":function(e,t,n){"use strict";var i=n("4e53"),a=n.n(i);a.a},6620:function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".section-maxwidth{max-width:992px}",""])},"6a81":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{class:e.section.fullwidth?"q-mb-md":"section-maxwidth q-mx-auto q-px-md q-my-md"},[e._t("editor"),n("div",{staticClass:"row wrap q-col-gutter-md"},[e._t("default")],2)],2)},a=[],s={name:"DynamicSection",props:{section:{type:Object,required:!0}}},r=s,o=(n("ee6a"),n("2877")),l=Object(o["a"])(r,i,a,!1,null,null,null);t["a"]=l.exports},"7aaf":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-field",e._b({attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)}},nativeOn:{click:function(t){e.showImageSelectDialog=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-avatar",{class:e.image?"cursor-pointer":"",attrs:{rounded:"",color:"grey-4"},on:{click:function(t){t.stopPropagation(),e.showImagePreviewDialog=!0}}},[e.image?n("q-img",{attrs:{src:e.$img.src(e.image.image_id,"xs"),placeholder:e.value.placeholder}}):e._e()],1)]},proxy:!0},{key:"control",fn:function(){return[n("div",{staticClass:"cursor-pointer col self-stretch row items-center"},[e._v("\n      "+e._s(e.image?e.image.name:null)+"\n    ")])]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"mdi-image-search"}},[n("q-tooltip",[e._v("\n        "+e._s(e.image?"Cambiar":"Seleccionar")+" Imagen\n      ")])],1)]},proxy:!0}])},"q-field",e.$attrs,!1),[n("dialog-window",{attrs:{title:"Selecionar Imagen"},model:{value:e.showImageSelectDialog,callback:function(t){e.showImageSelectDialog=t},expression:"showImageSelectDialog"}},[n("image-select",{attrs:{format:e.format},on:{done:e.imageSelected},scopedSlots:e._u([{key:"upload",fn:function(){return[n("q-btn",{staticClass:"q-mx-sm",attrs:{icon:"mdi-upload",dense:"",color:"accent"},on:{click:function(t){e.showImageUploadDialog=!0}}},[n("q-tooltip",[e._v("\n            Cargar Imagen Nueva\n          ")])],1)]},proxy:!0}])})],1),n("q-dialog",{attrs:{minimized:""},model:{value:e.showImageUploadDialog,callback:function(t){e.showImageUploadDialog=t},expression:"showImageUploadDialog"}},[n("q-card",[n("q-bar",[e._v("\n        Subir Imagen\n        "),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),n("image-upload",{attrs:{format:e.format},on:{done:e.imageUploaded}})],1)],1),e.image?n("q-dialog",{model:{value:e.showImagePreviewDialog,callback:function(t){e.showImagePreviewDialog=t},expression:"showImagePreviewDialog"}},[n("q-card",{staticStyle:{width:"60vw"}},[n("q-bar",[e._v("\n        "+e._s(e.image?e.image.name:null)+"\n        "),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),e.image?n("q-img",{attrs:{src:e.$img.src(e.image.image_id),srcset:e.$img.srcset(e.image),placeholder:e.image.placeholder}}):e._e()],1)],1):e._e()],1)},a=[],s=n("967e"),r=n.n(s),o=(n("96cf"),n("fa84")),l=n.n(o),c=n("7eb4"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-table",{attrs:{flat:"",title:"Selecionar Imagen",data:e.data,columns:e.columns,"row-key":"image_id",pagination:e.pagination,filter:e.filter,loading:e.loading},on:{"update:pagination":function(t){e.pagination=t},request:e.request},scopedSlots:e._u([{key:"top-right",fn:function(){return[e._t("upload"),n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"mdi-magnify"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-preview",fn:function(t){return[n("q-td",{attrs:{props:t,"auto-width":""}},[n("q-avatar",{attrs:{rounded:"",color:"grey-4"}},[n("q-img",{attrs:{src:e.$img.src(t.row.image_id,"xs"),placeholder:t.row.placeholder}})],1)],1)]}},{key:"body-cell-select",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-check"},on:{click:function(n){return e.select(t.row)}}})],1)]}}],null,!0)})},d=[],m=n("02fa"),p=n.n(m),h=(n("7f7f"),n("bd4c")),f=h["b"].formatDate,g={name:"ImageSelect",props:{format:{type:String,required:!1,default:null}},data:function(){return{loading:!1,filter:"",data:[],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:5,rowsNumber:0},columns:[{name:"preview",label:"Previsualizar",align:"left"},{name:"name",field:"name",label:"Nombre",align:"left"},{name:"format",field:function(e){return e.format.name},label:"Formato",align:"left"},{name:"select",label:"Selecionar"}]}},methods:{formatDate:f,request:function(){var e=l()(r.a.mark(function e(){var t,n,i,a,s,o,l,c,u,d=arguments;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=t.pagination,i=t.filter,a=void 0===i?"":i,n||(n=this.pagination),s="query ($where: website_image_bool_exp! $offset: Int! $limit: Int! $order_by: [website_image_order_by!]) {\n        meta: website_image_aggregate (where: $where) {\n          rows: aggregate {\n            count\n          }\n        }\n        data: website_image (where: $where offset: $offset limit: $limit order_by: $order_by) {\n          image_id\n          format_id\n          name\n          placeholder\n          format {\n            format_id\n            name\n            format_sizes {\n              size_id\n              width\n            }\n          }\n          created_at\n          created_by_user {\n            username\n          }\n        }\n      }",o={limit:n.rowsPerPage,offset:n.rowsPerPage*(n.page-1),order_by:[{created_at:"desc"}],where:{format_id:this.format?{_eq:this.format}:null,name:a?{_ilike:"%".concat(a,"%")}:null}},e.prev=4,this.loading=!0,e.next=8,this.$gql(s,o,{role:"administrator"});case 8:l=e.sent,c=l.data,u=l.meta.rows.count,this.pagination=p()({},n,{rowsNumber:u}),this.data=c,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](4),this.$gql.handleError(e.t0);case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}},e,this,[[4,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}(),select:function(e){this.$emit("done",e.image_id)}},mounted:function(){this.request()}},b=g,v=n("2877"),w=Object(v["a"])(b,u,d,!1,null,null,null),_=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.format?e._e():n("q-select",{attrs:{filled:"",label:"Formato",dense:"",options:e.formatOptions},model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}}),n("q-uploader",{ref:"uploader",attrs:{disable:!e.uploadFormat,"auto-upload":"","with-credentials":"",label:"Aggregar Imagenes",bordered:"",flat:"",url:e.url,accept:".jpg, .png, image/*","field-name":"image",headers:e.headers},on:{uploaded:e.uploaded}})],1)},q=[],k={name:"ImageUpload",props:{format:{type:String,required:!1}},data:function(){return{selectedFormat:null}},computed:{formatOptions:function(){return this.$store.state.website.formats.map(function(e){var t=e.format_id,n=e.name;return{value:t,label:n}})},uploadFormat:function(){return this.format?this.format:this.selectedFormat?this.selectedFormat.value:null},url:function(){return"https://chuturubi.com/api/v1/upload/image?format=".concat(this.uploadFormat)},headers:function(){return[{name:"Authorization",value:"session-auth ".concat(this.$q.sessionStorage.getItem("session-auth"))}]}},methods:{uploaded:function(e){this.$emit("done",e.xhr.response)}}},E=k,y=Object(v["a"])(E,x,q,!1,null,null,null),$=y.exports,D={name:"ImageInput",components:{DialogWindow:c["a"],ImageSelect:_,ImageUpload:$},props:{value:{type:String,required:!1},format:{type:String,required:!1}},data:function(){return{image:null,showImageSelectDialog:!1,showImageUploadDialog:!1,showImagePreviewDialog:!1}},watch:{value:function(){this.loadImage()}},methods:{loadImage:function(){var e=l()(r.a.mark(function e(){return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.value){e.next=12;break}return e.prev=1,e.next=4,this.$store.dispatch("website/IMAGE",this.value);case 4:this.image=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),this.$gql.handleError(e.t0);case 10:e.next=13;break;case 12:this.image=null;case 13:case"end":return e.stop()}},e,this,[[1,7]])}));function t(){return e.apply(this,arguments)}return t}(),imageUploaded:function(e){this.showImageSelectDialog=!1,this.showImageUploadDialog=!1,this.$emit("input",e)},imageSelected:function(e){this.showImageSelectDialog=!1,this.showImageUploadDialog=!1,this.$emit("input",e)}},mounted:function(){this.loadImage()}},I=D,S=Object(v["a"])(I,i,a,!1,null,null,null);t["a"]=S.exports},"7eb4":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{value:e.value,maximized:e.maximized&&!e.minimized.state,persistent:"",seamless:e.minimized.state,position:e.minimized.state?"bottom":"standard","content-class":e.minimized.state?"dialog-window-minimized q-pa-none":null,"transition-hide":e.minimized.state?"slide-down":"scale"},on:{input:e.update,hide:e.reset}},[e.minimized.state?n("q-bar",{staticClass:"bg-primary text-white cursor-pointer rounded-borders overflow-hidden ellipsis",style:"width: 250px; margin-left: "+250*(null===e.minimized.slot?0:e.minimized.slot)+"px;",on:{click:e.restore}},[n("div",{staticClass:"ellipsis"},[e._v("\n      "+e._s(e.title)+"\n    ")]),n("q-space"),n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{staticClass:"window-minimize",attrs:{flat:"",icon:"mdi-window-minimize",dense:"",disable:e.minimized.state}}),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(e.maximized?"maximize":"restore")}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}})],1)],1):[n("div",{staticClass:"bg-white",style:e.maximized?"":"max-width: none; min-width: 560px"},[n("q-bar",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"ellipsis"},[e._v("\n          "+e._s(e.title)+"\n        ")]),n("q-space"),n("q-btn",{staticClass:"window-minimize",attrs:{flat:"",dense:"",icon:"mdi-window-minimize"},on:{click:e.minimize}}),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(e.maximized?"restore":"maximize")},on:{click:e.toggle}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),n("main",{staticClass:"scroll",style:e.maximized?"max-height: calc(100vh - 32px);":"max-height: calc(100vh - 80px);"},[e._t("default")],2)],1)]],2)},a=[],s=(n("6762"),n("2fdb"),n("4db1")),r=n.n(s),o={name:"DialogWindow",props:{title:{type:String,default:""},value:{type:Boolean,required:!0}},data:function(){return{minimized:{state:!1,slots:[],slot:null},maximized:!1}},computed:{toggleIcon:function(){return this.minimized.state?this.maximized?"maximize":"restore":this.maximized?"restore":"maximize"},nextSlot:function(){var e=this;return Math.min.apply(Math,r()(this.minimized.slots.map(function(e,t){return t}).filter(function(t){return!e.minimized.slots.includes(t)})).concat([this.minimized.slots.length]))}},methods:{unbindSlot:function(){this.$root.$emit("DIALOG_WINDOW_RESTORED",this.minimized.slot),this.minimized.slot=null},bindSlot:function(){this.minimized.slot=this.nextSlot,this.$root.$emit("DIALOG_WINDOW_MINIMIZED",this.minimized.slot)},onBindSlot:function(e){this.minimized.slots.push(e)},onUnbindSlot:function(e){this.minimized.slots=this.minimized.slots.filter(function(t){return t!==e})},reset:function(){this.maximized=!1,this.minimizedId=0,null!==this.minimized.slot&&this.unbindSlot(),this.minimized.state=!1},minimize:function(){this.bindSlot(),this.minimized.state=!0},restore:function(){this.minimized.state=!1,this.unbindSlot()},toggle:function(){this.minimized.state?this.restore():this.maximized=!this.maximized},update:function(e){this.$emit("input",e)}},created:function(){this.$root.$on("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$on("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)},beforeDestroy:function(){null!==this.minimized.slot&&this.unbindSlot(),this.$root.$off("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$off("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)}},l=o,c=(n("5fa6"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,null,null);t["a"]=u.exports},8062:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"no-shadow",class:e.elementClass},[n("q-card",{class:e.card?"overflow-hidden rounded-borders":"no-shadow"},[e._t("editor"),n("div",{class:{"cursor-pointer":e.hasLink},on:{click:e.handleClick}},[e.$i18n(e.element,"image")?n("q-img",{attrs:{src:e.$img.src(e.$i18n(e.element,"image").image_id),srcset:e.$img.srcset(e.$i18n(e.element,"image")),sizes:e.imageSizes,placeholder:e.$i18n(e.element,"image").placeholder}},[e.$i18n(e.element,"caption")?n("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[e._v("\n          "+e._s(e.$i18n(e.element,"caption"))+"\n          "),e.hasLink?n("q-icon",{attrs:{name:"mdi-forward"}}):e._e()],1):e._e()]):e._e(),e.$i18n(e.element,"title")||e.$i18n(e.element,"subtitle")?n("q-card-section",[e.$i18n(e.element,"title")?n("div",{staticClass:"text-h6 text-primary"},[e._v(e._s(e.$i18n(e.element,"title")))]):e._e(),e.$i18n(e.element,"subtitle")?n("div",{staticClass:"text-subtitle2 text-accent"},[e._v(e._s(e.$i18n(e.element,"subtitle")))]):e._e()]):e._e(),e.$i18n(e.element,"body")?n("q-card-section",[n("div",{domProps:{innerHTML:e._s(e.$i18n(e.element,"body"))}})]):e._e()],1)],2)],1)},a=[],s=(n("4917"),n("f3e3")),r=n.n(s),o=n("0967"),l=n("2b0e"),c=function(e,t){var n=window.open;if(!0===o["a"].is.cordova){if(void 0!==cordova&&void 0!==cordova.InAppBrowser&&void 0!==cordova.InAppBrowser.open)n=cordova.InAppBrowser.open;else if(void 0!==navigator&&void 0!==navigator.app)return navigator.app.loadUrl(e,{openExternal:!0})}else if(void 0!==l["a"].prototype.$q.electron)return l["a"].prototype.$q.electron.shell.openExternal(e);var i=n(e,"_blank");if(i)return i.focus(),i;t&&t()},u={name:"DynamicElement",props:{card:{type:Boolean,default:!0},element:{type:Object,required:!0}},computed:{hasLink:function(){return null!==this.element.internal_link||(null!==this.element.external_link||null!==this.element.listing_link)},imageSizes:function(){switch(this.element.size_id){case"xl":return"100vw";case"lg":return"80vw";case"md":return"50vw";case"sm":return"33vw";case"xs":return"25vw";default:return""}},elementClass:function(){switch(this.element.size_id){case"xl":return"col-12";case"lg":return"col-12 col-md-8";case"md":return"col-12 col-sm-6";case"sm":return"col-12 col-sm-6 col-md-4";case"xs":return"col-6 col-sm-3";default:return""}}},methods:{handleClick:function(){if(null!==this.element.internal_link){var e=this.$route.fullPath.match(/^\/website\/(editor|preview)/),t=r()(e,2),n=t[1];this.$router.push("/website/".concat(n,"/").concat(this.element.internal_link))}else null!==this.element.external_link?c(this.element.external_link):null!==this.element.listing_link&&this.$router.push("/listing/".concat(this.element.listing_link))}}},d=u,m=n("2877"),p=Object(m["a"])(d,i,a,!1,null,null,null);t["a"]=p.exports},a8ef:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[e.page?n("dynamic-page",{attrs:{page:e.page},scopedSlots:e._u([{key:"editor",fn:function(){return[n("div",{staticClass:"section-maxwidth q-mx-auto q-px-md q-my-md"},[n("q-card",{staticClass:"q-my-md"},[n("dynamic-page-editor",{attrs:{page:e.page}})],1)],1)]},proxy:!0}],null,!1,2310606012)},e._l(e.page.sections,function(t,i){return n("dynamic-section",{key:"section_"+i,attrs:{section:t},scopedSlots:e._u([{key:"editor",fn:function(){return[n("q-card",{staticClass:"q-my-md"},[n("dynamic-section-editor",{attrs:{section:t,page:e.page}})],1)]},proxy:!0}],null,!0)},e._l(t.elements,function(i,a){return n("dynamic-element",{key:"element_"+a,attrs:{element:i,card:!t.fullwidth},scopedSlots:e._u([{key:"editor",fn:function(){return[n("dynamic-element-editor",{attrs:{element:i,section:t}})]},proxy:!0}],null,!0)})}),1)}),1):n("q-inner-loading",{attrs:{showing:!0}},[n("q-spinner")],1),n("q-page-sticky",{attrs:{position:"top-left",offset:[16,16]}},[n("q-btn",{attrs:{icon:"mdi-view-list",color:"white","text-color":"black",size:"sm",round:""},on:{click:function(t){return e.$router.push("/website")}}})],1),n("q-page-sticky",{attrs:{position:"top-right",offset:[16,16]}},[n("q-btn",{attrs:{icon:"mdi-check",color:"white","text-color":"black",size:"sm",round:""},on:{click:function(t){return e.$router.push("/website/preview/"+e.path)}}})],1)],1)},a=[],s=n("d987"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-bar",[e._v("\n  Pagina\n  "),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-pencil"},on:{click:function(t){e.showUpdatePageDialog=!0}}},[n("q-tooltip",[e._v("\n      Editar Pagina\n    ")])],1),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-plus"},on:{click:e.addSection}},[n("q-tooltip",[e._v("\n      Aggregar Seccion\n    ")])],1),n("q-space"),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-delete"},on:{click:e.removePage}},[n("q-tooltip",[e._v("\n      Eliminar seccion\n    ")])],1),n("dialog-window",{attrs:{title:"Editar Elemento"},model:{value:e.showUpdatePageDialog,callback:function(t){e.showUpdatePageDialog=t},expression:"showUpdatePageDialog"}},[n("q-form",{staticClass:"q-pa-md",on:{submit:e.submit,reset:e.reset}},[n("div",{staticClass:"q-gutter-y-md"},[n("q-input",{attrs:{filled:"",required:"",label:"Nombre",hint:"Nombre de uso interno","lazy-rules":"",rules:[]},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),n("q-input",{attrs:{filled:"",prefix:"/",label:"Ruta",hint:"Ruta donde se encontrara la pagina. Debe ser unica","lazy-rules":"",rules:[function(e){return!!/^([\w-]+(\/[\w-]+)*)?$/.test(e)||"Ruta invalida."}]},model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}}),n("image-input",{attrs:{filled:"",format:"background"},model:{value:e.model.image_id,callback:function(t){e.$set(e.model,"image_id",t)},expression:"model.image_id"}})],1),n("q-separator"),n("div",{staticClass:"row justify-around q-pa-md"},[n("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[e._v("reset")]),n("q-btn",{attrs:{color:"primary",type:"submit"}},[e._v("Guardar")])],1),n("q-inner-loading",{attrs:{showing:e.loading}},[n("q-spinner")],1)],1),n("q-expansion-item",{attrs:{label:"State"}},[n("q-card-section",{staticClass:"scroll"},[n("pre",[e._v(e._s(e.$store.state.website))])])],1)],1)],1)},o=[],l=(n("7f7f"),n("967e")),c=n.n(l),u=(n("96cf"),n("fa84")),d=n.n(u),m=(n("ac6a"),n("cadf"),n("06db"),n("456d"),n("7eb4")),p=n("7aaf"),h={name:"DynamicPageEditor",components:{ImageInput:p["a"],DialogWindow:m["a"]},props:{page:{type:Object,required:!0}},data:function(){return{loading:!1,showUpdatePageDialog:!1,model:{image_id:null,path:"",name:""}}},watch:{page:function(){this.reset()}},methods:{reset:function(){var e=this;Object.keys(this.model).forEach(function(t){e.model[t]=e.page[t]})},submit:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$store.dispatch("website/UPDATE_PAGE",{where:{page_id:{_eq:this.page.page_id}},_set:this.model});case 4:if(this.page.path===this.model.path){e.next=8;break}this.$router.push("/website/editor/".concat(this.model.path)),e.next=10;break;case 8:return e.next=10,this.$store.dispatch("website/LOAD_PAGE");case 10:this.showUpdatePageDialog=!1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.$gql.handleError(e.t0);case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[0,13,16,19]])}));function t(){return e.apply(this,arguments)}return t}(),removePage:function(){var e=this;this.$q.dialog({title:"Eliminar Pagina",message:"Esta accion es ireversible. Se Elimninara esta pagina, sus secciones, y todos sus elementos. Para confirmar escriba el nombre de la pagina: ".concat(this.page.name),prompt:{model:"",type:"text"},cancel:!0}).onOk(function(){var t=d()(c.a.mark(function t(n){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n===e.page.name){t.next=2;break}return t.abrupt("return",e.$q.notify({message:"Nombre de pagina no coincide",color:"warning"}));case 2:return t.prev=2,t.next=5,e.$store.dispatch("website/DELETE_PAGE",{where:{page_id:{_eq:e.page.page_id}}});case 5:e.$router.push("/website"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),e.$gql.handleError(t.t0);case 11:case"end":return t.stop()}},t,null,[[2,8]])}));return function(e){return t.apply(this,arguments)}}())},addSection:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("website/CREATE_SECTION",{page_id:this.page.page_id,index:this.page.sections.reduce(function(e,t,n){return t.index!==n&&n<e?n:e},this.page.sections.length)});case 3:return e.next=5,this.$store.dispatch("website/LOAD_PAGE");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$gql.handleError(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.reset()}},f=h,g=n("2877"),b=Object(g["a"])(f,r,o,!1,null,null,null),v=b.exports,w=n("6a81"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-bar",[e._v("\n  Seccion\n  "+e._s(e.section.index+1)+"\n  "),n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-arrow-"+(e.section.fullwidth?"collapse":"expand")+"-horizontal"},on:{click:function(t){return e.update({fullwidth:!e.section.fullwidth})}}},[n("q-tooltip",[e._v("\n        "+e._s(e.section.fullwidth?"Anchura Normal":"Anchura Completa")+"\n      ")])],1),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-plus"},on:{click:e.addElement}},[n("q-tooltip",[e._v("\n        Aggregar Elemento\n      ")])],1)],1),n("q-space"),n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{attrs:{flat:"",icon:"mdi-chevron-down",dense:"",disable:!e.canMoveDown,loading:e.movingDown},on:{click:e.moveDown}},[n("q-tooltip",[e._v("\n        Bajar\n      ")])],1),n("q-btn",{attrs:{flat:"",icon:"mdi-chevron-up",dense:"",disable:!e.canMoveUp,loading:e.movingUp},on:{click:e.moveUp}},[n("q-tooltip",[e._v("\n        Subir\n      ")])],1)],1),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-delete"},on:{click:e.removeSection}},[n("q-tooltip",[e._v("\n      Eliminar seccion\n    ")])],1),n("dialog-window",{attrs:{title:"Editar Seccion"},model:{value:e.showUpdateSectionDialog,callback:function(t){e.showUpdateSectionDialog=t},expression:"showUpdateSectionDialog"}},[n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-plus"},on:{click:e.addElement}},[n("q-tooltip",[e._v("\n        Aggregar Elemento\n      ")])],1)],1)],1)},x=[],q=n("4db1"),k=n.n(q),E={name:"DynamicSectionEditor",components:{DialogWindow:m["a"]},props:{page:{type:Object,required:!0},section:{type:Object,required:!0}},data:function(){return{movingUp:!1,movingDown:!1,showUpdateSectionDialog:!1}},computed:{nextIndex:function(){var e=this,t=this.page.sections.map(function(e){var t=e.index;return t}).filter(function(t){return t>e.section.index});return t.length?Math.min.apply(Math,k()(t)):null},previousIndex:function(){var e=this,t=this.page.sections.map(function(e){var t=e.index;return t}).filter(function(t){return t<e.section.index});return t.length?Math.max.apply(Math,k()(t)):null},canMoveDown:function(){return null!==this.nextIndex},canMoveUp:function(){return null!==this.previousIndex}},methods:{update:function(){var e=d()(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("website/UPDATE_SECTION",{_set:t,where:{section_id:{_eq:this.section.section_id}}});case 3:return e.next=5,this.$store.dispatch("website/LOAD_PAGE");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$gql.handleError(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t){return e.apply(this,arguments)}return t}(),moveDown:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.canMoveDown){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.movingDown=!0,e.next=6,this.$store.dispatch("website/SWAP_PAGE_SECTIONS",{page_id:this.page.page_id,index_a:this.section.index,index_b:this.nextIndex});case 6:return e.next=8,this.$store.dispatch("website/LOAD_PAGE");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$api.handleError(e.t0);case 13:return e.prev=13,this.movingDown=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),moveUp:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.canMoveUp){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.movingUp=!0,e.next=6,this.$store.dispatch("website/SWAP_PAGE_SECTIONS",{page_id:this.page.page_id,index_a:this.section.index,index_b:this.previousIndex});case 6:return e.next=8,this.$store.dispatch("website/LOAD_PAGE");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$api.handleError(e.t0);case 13:return e.prev=13,this.movingUp=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),removeSection:function(){var e=this;this.$q.dialog({title:"Eliminar Seccion",message:"Esta accion es ireversible. Se Elimninara esta seccion y todos sus elementos. Para confirmar escriba el numero de la seccion",prompt:{model:"",type:"number"},cancel:!0}).onOk(function(){var t=d()(c.a.mark(function t(n){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n===String(e.section.index+1)){t.next=2;break}return t.abrupt("return",e.$q.notify({message:"Numero incorrecto. Debe ingresar el numero de la seccion",color:"warning"}));case 2:return t.prev=2,t.next=5,e.$store.dispatch("website/DELETE_SECTION",{where:{section_id:{_eq:e.section.section_id}}});case 5:return t.next=7,e.$store.dispatch("website/LOAD_PAGE");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$gql.handleError(t.t0);case 12:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}())},addElement:function(){var e=d()(c.a.mark(function e(){var t;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={section_id:this.section.section_id,index:this.section.elements.reduce(function(e,t,n){return t.index!==n&&n<e?n:e},this.section.elements.length),size_id:"md",i18n:{data:this.$store.state.website.locales.map(function(e){var t=e.locale_id;return{locale_id:t}})}},e.next=4,this.$store.dispatch("website/CREATE_ELEMENT",t);case 4:return e.next=6,this.$store.dispatch("website/LOAD_PAGE");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$gql.handleError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()}},y=E,$=Object(g["a"])(y,_,x,!1,null,null,null),D=$.exports,I=n("8062"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-bar",[n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-pencil"},on:{click:function(t){e.showUpdateElementDialog=!0}}},[n("q-tooltip",[e._v("\n        Editar Contenido\n      ")])],1),n("q-btn",{attrs:{flat:"",icon:"mdi-arrow-expand-all",dense:""},on:{click:e.increaseSize}},[n("q-tooltip",[e._v("\n        Aumentar tamaño\n      ")])],1),n("q-btn",{attrs:{flat:"",icon:"mdi-arrow-collapse-all",dense:""},on:{click:e.decreaseSize}},[n("q-tooltip",[e._v("\n        Disminuir tamaño\n      ")])],1)],1),n("q-space"),n("q-btn-group",{attrs:{flat:""}},[n("q-btn",{attrs:{flat:"",icon:"mdi-chevron-down",dense:"",disable:!e.canMoveDown,loading:e.movingDown},on:{click:e.moveDown}},[n("q-tooltip",[e._v("\n        Bajar\n      ")])],1),n("q-btn",{attrs:{flat:"",icon:"mdi-chevron-up",dense:"",disable:!e.canMoveUp,loading:e.movingUp},on:{click:e.moveUp}},[n("q-tooltip",[e._v("\n        Subir\n      ")])],1),n("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-delete"},on:{click:e.deleteElement}},[n("q-tooltip",[e._v("\n        Eliminar elemento\n      ")])],1)],1),n("dialog-window",{attrs:{title:"Editar Elemento"},model:{value:e.showUpdateElementDialog,callback:function(t){e.showUpdateElementDialog=t},expression:"showUpdateElementDialog"}},[n("q-tabs",{attrs:{dense:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{name:"element",label:"Elemento"}}),n("q-tab",{attrs:{name:"i18n",label:"Idiomas"}})],1),n("q-tab-panels",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"element"}},[n("update-element",{attrs:{element:e.element},on:{done:function(){}}})],1),n("q-tab-panel",{attrs:{name:"i18n"}},[n("update-element-i18n",{attrs:{element:e.element},on:{done:function(){}}})],1)],1)],1)],1)},O=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-form",{staticClass:"q-gutter-y-sm",on:{submit:e.submit,reset:e.reset}},[n("q-select",{attrs:{dense:"",label:"Tipo Vinculo",options:e.options.mode,dark:"","bg-color":"accent",filled:""},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),e.mode===e.LINK_EXTERNAL?[n("q-input",{attrs:{filled:"",dense:"",label:e.LINK_EXTERNAL},model:{value:e.external,callback:function(t){e.external=t},expression:"external"}})]:e.mode===e.LINK_INTERNAL?[n("q-select",{attrs:{loading:e.loadingOptions,dense:"",filled:"",options:e.options.internal,label:e.LINK_INTERNAL},model:{value:e.internal,callback:function(t){e.internal=t},expression:"internal"}})]:e.mode===e.LINK_LISTING?[n("q-select",{attrs:{loading:e.loadingOptions,dense:"",filled:"",options:e.options.listing,label:e.LINK_LISTING},model:{value:e.listing,callback:function(t){e.listing=t},expression:"listing"}})]:e._e(),n("div",{staticClass:"row justify-around q-pa-md"},[n("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[e._v("reset")]),n("q-btn",{attrs:{color:"primary",type:"submit"}},[e._v("Guardar")])],1),n("q-inner-loading",{attrs:{showing:e.loading}},[n("q-spinner")],1)],2)},A=[],N=n("02fa"),L=n.n(N),P=(n("7514"),"Ninguno"),U="Vinculo Externo",C="Vinculo Interno",T="Vinculo Paquete",M={name:"UpdateElement",props:{element:{type:Object,required:!0}},data:function(){return{LINK_NONE:P,LINK_EXTERNAL:U,LINK_INTERNAL:C,LINK_LISTING:T,options:{internal:[],listing:[],mode:[P,U,C,T]},loading:!1,loadingOptions:!1,external:"",internal:null,listing:null,mode:P}},watch:{element:function(){this.reset()},mode:function(){this.loadOptions()}},computed:{external_link:function(){return this.external?this.external:null},internal_link:function(){return this.internal?this.internal.value:null},listing_link:function(){return this.listing?this.listing.value:null},updateLinks:function(){var e={internal_link:null,external_link:null,listing_link:null};switch(this.mode){case C:e.internal_link=this.internal_link;break;case U:e.external_link=this.external_link;break;case T:e.listing_link=this.listing_link;break}return e}},methods:{loadOptions:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.mode===C||this.mode===T){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.loadingOptions=!0,this.mode!==C){e.next=9;break}return e.next=7,this.getInternalOptions();case 7:e.next=12;break;case 9:if(this.mode!==T){e.next=12;break}return e.next=12,this.getListingOptions();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 17:return e.prev=17,this.loadingOptions=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[2,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}(),getListingOptions:function(){var e=d()(c.a.mark(function e(){var t,n,i,a;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="query ($where: webstore_listing_bool_exp) {\n        options: webstore_listing (where: $where) {\n          value: listing_id\n          label: name\n        }\n      }",n={where:{available_to:{_gte:(new Date).toISOString()}}},e.next=4,this.$gql(t,n,{role:"administrator"});case 4:i=e.sent,a=i.options,this.options.listing=a;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getInternalOptions:function(){var e=d()(c.a.mark(function e(){var t,n,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="query {\n        options: website_page {\n          value: path\n          label: name\n        }\n      }",e.next=3,this.$gql(t,{},{role:"administrator"});case 3:n=e.sent,i=n.options,this.options.internal=i;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){var e=this;this.element.external_link?(this.mode=U,this.external=this.element.external_link):this.element.internal_link?(this.mode=C,this.internal={value:this.element.internal_link,label:(this.options.internal.find(function(t){return t.value===e.element.internal_link})||{label:this.element.internal_link}).label}):this.element.listing_link?(this.mode=T,this.listing={value:this.element.listing,label:(this.options.listing.find(function(t){return t.value===e.element.listing_link})||{label:this.element.listing_link}).label}):this.mode=P},submit:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$store.dispatch("website/UPDATE_ELEMENT",{where:{element_id:{_eq:this.element.element_id}},_set:L()({},this.updateLinks)});case 4:return this.$q.notify({color:"positive",icon:"mdi-check",message:"Actualizado Exitosamente"}),e.next=7,this.$store.dispatch("website/LOAD_PAGE");case 7:this.$emit("done"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$gql.handleError(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[0,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.reset()}},j=M,G=Object(g["a"])(j,z,A,!1,null,null,null),W=G.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-form",{staticClass:"q-gutter-y-sm",on:{submit:e.submit,reset:e.reset}},[n("q-select",{attrs:{dense:"",label:"Idioma",value:e.locale,"display-value":e.localeDisplayValue,options:e.localeOptions,clearable:"",dark:"","bg-color":"accent",filled:""},on:{input:e.changeLocale}}),n("image-input",{attrs:{label:"Imagen",dense:"",filled:""},model:{value:e.model.image_id,callback:function(t){e.$set(e.model,"image_id",t)},expression:"model.image_id"}}),n("q-input",{attrs:{label:"Leyenda",dense:"",filled:""},model:{value:e.model.caption,callback:function(t){e.$set(e.model,"caption",t)},expression:"model.caption"}}),n("q-input",{attrs:{label:"Titulo",dense:"",filled:""},model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}}),n("q-input",{attrs:{label:"Subtitulo",dense:"",filled:""},model:{value:e.model.subtitle,callback:function(t){e.$set(e.model,"subtitle",t)},expression:"model.subtitle"}}),n("q-editor",{model:{value:e.model.body,callback:function(t){e.$set(e.model,"body",t)},expression:"model.body"}}),n("div",{staticClass:"row justify-around q-pa-md"},[n("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[e._v("reset")]),n("q-btn",{attrs:{color:"primary",type:"submit"}},[e._v("Guardar")])],1),n("q-inner-loading",{attrs:{showing:e.loading}},[n("q-spinner")],1)],1)},B=[],F={name:"UpdateElementI18n",components:{ImageInput:p["a"]},props:{element:{type:Object,required:!0}},data:function(){return{loading:!1,locale:null,model:{image_id:null,caption:"",title:"",subtitle:"",body:""}}},computed:{updateFields:function(){var e=this;return Object.keys(this.model).reduce(function(t,n){return t[n]=e.model[n]?e.model[n]:null,t},{})},locales:function(){return this.$store.state.website.locales},localeOptions:function(){return this.locales.map(function(e){var t=e.locale_id,n=e.name;return{value:t,label:n}})},localeDisplayValue:function(){return this.locale?this.locale.name:"Todos"}},watch:{locale:function(){this.reset()}},methods:{changeLocale:function(e){var t=this;this.updated?this.$q.dialog({title:"Cambiar Idioma",message:"Si cambia el idioma ahora podria perder todos sus cambios",cancel:!0}).onOk(function(){t.locale=e}):this.locale=e},reset:function(){var e=d()(c.a.mark(function e(){var t,n,i=this;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.locale){e.next=2;break}return e.abrupt("return");case 2:return t={locale_id:this.locale.value,element_id:this.element.element_id},e.prev=3,this.loading=!0,e.next=7,this.$store.dispatch("website/LOAD_ELEMENT_I18N_BY_PK",t);case 7:n=e.sent,Object.keys(n).forEach(function(e){i.model[e]=n[e]?n[e]:""}),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),this.$gql.handleError(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[3,11,14,17]])}));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=d()(c.a.mark(function e(){var t,n,i=this,a=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],this.locale||!0===t){e.next=3;break}return e.abrupt("return",this.$q.dialog({title:"No a seleccionado nigun idioma",message:"Si continua, se guardaran los cambios para todos los idioma.",cancel:!0}).onOk(function(){i.submit(!0)}));case 3:return n={_set:this.updateFields,where:{element_id:{_eq:this.element.element_id},locale_id:this.locale?{_eq:this.locale.value}:null}},e.prev=4,this.loading=!0,e.next=8,this.$store.dispatch("website/UPDATE_ELEMENT_I18N",n);case 8:return e.next=10,this.$store.dispatch("website/LOAD_PAGE");case 10:this.$q.notify({color:"positive",icon:"mdi-check",message:"Actualizado Exitosamente"}),this.$emit("done"),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),this.$gql.handleError(e.t0);case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[4,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this.$store.state.website.locale,t=this.locales.find(function(t){return t.locale_id===e});t&&(this.locale={value:t.locale_id,label:t.name})}},K=F,V=Object(g["a"])(K,R,B,!1,null,null,null),X=V.exports,Z=["xs","sm","md","lg","xl"],J={name:"DynamicElementEditor",components:{DialogWindow:m["a"],UpdateElement:W,UpdateElementI18n:X},props:{section:{type:Object,required:!0},element:{type:Object,required:!0}},data:function(){return{movingDown:!1,movingUp:!1,tab:"element",locale:null,showUpdateElementDialog:!1}},computed:{nextIndex:function(){var e=this,t=this.section.elements.map(function(e){var t=e.index;return t}).filter(function(t){return t>e.element.index});return t.length?Math.min.apply(Math,k()(t)):null},previousIndex:function(){var e=this,t=this.section.elements.map(function(e){var t=e.index;return t}).filter(function(t){return t<e.element.index});return t.length?Math.max.apply(Math,k()(t)):null},canMoveDown:function(){return null!==this.nextIndex},canMoveUp:function(){return null!==this.previousIndex},locales:function(){return this.$store.state.website.locales}},methods:{moveDown:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.canMoveDown){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.movingDown=!0,e.next=6,this.$store.dispatch("website/SWAP_SECTION_ELEMENTS",{section_id:this.section.section_id,index_a:this.element.index,index_b:this.nextIndex});case 6:return e.next=8,this.$store.dispatch("website/LOAD_PAGE");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$api.handleError(e.t0);case 13:return e.prev=13,this.movingDown=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),moveUp:function(){var e=d()(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.canMoveUp){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.movingUp=!0,e.next=6,this.$store.dispatch("website/SWAP_SECTION_ELEMENTS",{section_id:this.section.section_id,index_a:this.element.index,index_b:this.previousIndex});case 6:return e.next=8,this.$store.dispatch("website/LOAD_PAGE");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$api.handleError(e.t0);case 13:return e.prev=13,this.movingUp=!1,e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,10,13,16]])}));function t(){return e.apply(this,arguments)}return t}(),increaseSize:function(){var e=Z.indexOf(this.element.size_id),t=(e+Z.length+1)%Z.length;this.updateSize(Z[t])},decreaseSize:function(){var e=Z.indexOf(this.element.size_id),t=(e+Z.length-1)%Z.length;this.updateSize(Z[t])},updateSize:function(){var e=d()(c.a.mark(function e(t){var n,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={element_id:{_eq:this.element.element_id}},i={size_id:t},e.prev=2,e.next=5,this.$store.dispatch("website/UPDATE_ELEMENT",{where:n,_set:i});case 5:return e.next=7,this.$store.dispatch("website/LOAD_PAGE");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteElement:function(){var e=this;this.$q.dialog({title:"Confirmar",message:"Eliminar Elemento?",cancel:!0}).onOk(d()(c.a.mark(function t(){return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("website/DELETE_ELEMENT",{where:{element_id:{_eq:e.element.element_id}}});case 3:return t.next=5,e.$store.dispatch("website/LOAD_PAGE");case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$gql.handleError(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])})))},updateImage:function(){var e=d()(c.a.mark(function e(t){var n,i;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={element_id:{_eq:this.element.element_id}},i={image_id:t},e.prev=2,e.next=5,this.$store.dispatch("website/UPDATE_ELEMENT",{where:n,_set:i});case 5:return e.next=7,this.$store.dispatch("website/LOAD_PAGE");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}()}},H=J,Y=Object(g["a"])(H,S,O,!1,null,null,null),Q=Y.exports,ee={name:"DynamicWebsite",components:{DynamicPage:s["a"],DynamicPageEditor:v,DynamicSection:w["a"],DynamicSectionEditor:D,DynamicElement:I["a"],DynamicElementEditor:Q},props:{path:{type:String,required:!1,default:""}},data:function(){return{}},watch:{$route:function(e,t){this.$store.dispatch("website/LOAD_PAGE",{path:e.params.path})}},computed:{page:function(){return this.$store.state.website.page}},methods:{},mounted:function(){this.$store.dispatch("website/LOAD_PAGE",{path:this.path})}},te=ee,ne=Object(g["a"])(te,i,a,!1,null,null,null);t["default"]=ne.exports},d987:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("editor"),e._t("default")],2)},a=[],s={name:"DynamicPage",props:{page:{type:Object,required:!0}}},r=s,o=n("2877"),l=Object(o["a"])(r,i,a,!1,null,null,null);t["a"]=l.exports},e916:function(e,t,n){t=e.exports=n("24fb")(!1),t.push([e.i,".q-btn.window-minimize .q-icon:before{margin-top:45%;height:45%}.q-dialog.dialog-window-minimized>.q-dialog__inner{justify-content:left}",""])},ee6a:function(e,t,n){"use strict";var i=n("f1fc"),a=n.n(i);a.a},f1fc:function(e,t,n){var i=n("6620");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("499e").default;a("293733f8",i,!1,{sourceMap:!1})}}]);