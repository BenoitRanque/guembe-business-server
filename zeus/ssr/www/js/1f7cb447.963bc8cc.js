(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1f7cb447"],{"2d52":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{attrs:{padding:""}},[i("pre",[t._v("    "+t._s(t.page)+"\n  ")]),t._l(t.page.sections,function(e,n){return i("div",{key:n,staticClass:"text-center q-pa-md bg-blue-1"},[i("q-btn",{attrs:{round:"",icon:"mdi-plus",color:"accent"},on:{click:function(i){return t.addElement(e.section_id,e.elements.length)}}})],1)}),i("div",{staticClass:"text-center q-pa-md"},[i("q-btn",{attrs:{round:"",icon:"mdi-plus",color:"accent"},on:{click:function(e){return t.addSection(t.page.page_id,t.page.sections.length)}}})],1),i("dialog-window",{attrs:{title:"Crear Elemento"},model:{value:t.showCreateElementDialog,callback:function(e){t.showCreateElementDialog=e},expression:"showCreateElementDialog"}},[i("create-element")],1)],2)},s=[],a=i("f3e3"),o=i.n(a),r=i("967e"),l=i.n(r),c=(i("96cf"),i("fa84")),d=i.n(c),m=i("7eb4"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-form",{on:{submit:t.submit,reset:t.reset}},[i("div",{staticClass:"q-gutter-md q-pa-md"},[i("q-select",{attrs:{options:["xl","lg","md","sm","xs"]},model:{value:t.element.size_id,callback:function(e){t.$set(t.element,"size_id",e)},expression:"element.size_id"}})],1),i("q-separator"),i("div",{staticClass:"row justify-around q-pa-md"},[i("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[t._v("reset")]),i("q-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Crear")])],1),i("q-inner-loading",{attrs:{showing:t.loading}},[i("q-spinner")],1)],1)},p=[],h=i("02fa"),f=i.n(h),b={name:"CreateElement",data:function(){return{loading:!1,options:{economic_activity:[]},element:{size_id:null}}},methods:{reset:function(){this.element.size_id=null},submit:function(){this.$q.dialog({title:"Confirmar",message:"Este registro no puede modificicarse luego de la creacion",persistent:!0,cancel:!0}).onOk(this.createElement)},createElement:function(){var t=d()(l.a.mark(function t(){var e,i;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="mutation ($objects: [website_element_insert_input!]!) {\n        insert: insert_website_element (objects: $objects) {\n          affected_rows\n        }\n      }",i={objects:f()({},this.element)},t.prev=2,this.loading=!0,t.next=6,this.$gql(e,i,{role:"administrator"});case 6:this.$q.notify({icon:"mdi-check",color:"positive",message:"Elemento Creado Exitosamente"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[2,9,12,15]])}));function e(){return t.apply(this,arguments)}return e}()}},g=b,w=i("2877"),_=Object(w["a"])(g,u,p,!1,null,null,null),z=_.exports,x={name:"WebsitePage",components:{DialogWindow:m["a"],CreateElement:z},props:{path:{type:String,required:!1,default:""}},data:function(){return{showCreateElementDialog:!1,page:null}},methods:{addSection:function(){var t=d()(l.a.mark(function t(e,i){var n,s;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="mutation ($objects: [website_section_insert_input!]!) {\n        insert_website_section (objects: $objects) {\n          affected_rows\n        }\n      }",s={objects:{page_id:e,index:i}},t.prev=2,t.next=5,this.$gql(n,s,{role:"administrator"});case 5:this.loadPage(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,i){return t.apply(this,arguments)}return e}(),addElement:function(){var t=d()(l.a.mark(function t(e,i){var n,s;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="mutation ($objects: [website_element_insert_input!]!) {\n        insert_website_element (objects: $objects) {\n          affected_rows\n        }\n      }",s={objects:{section_id:e,index:i}},t.prev=2,t.next=5,this.$gql(n,s,{role:"administrator"});case 5:this.loadPage(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 11:case"end":return t.stop()}},t,this,[[2,8]])}));function e(e,i){return t.apply(this,arguments)}return e}(),loadPage:function(){var t=d()(l.a.mark(function t(){var e,i,n,s,a;return l.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="query ($where: website_page_bool_exp) {\n        pages: website_page (where: $where) {\n          page_id\n          name\n          path\n          sections (order_by: { index: asc }) {\n            section_id\n            elements (order_by: { index: asc }) {\n              element_id\n              size_id\n              i18n {\n                body\n                caption\n                subtitle\n                title\n              }\n            }\n          }\n        }\n      }",i={where:{path:{_eq:this.path}}},t.prev=2,t.next=5,this.$gql(e,i,{role:"administrator"});case 5:if(n=t.sent,s=o()(n.pages,1),a=s[0],a){t.next=10;break}return t.abrupt("return",this.$router.push("/Error404"));case 10:this.page=a,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 16:case"end":return t.stop()}},t,this,[[2,13]])}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.loadPage()}},v=x,q=Object(w["a"])(v,n,s,!1,null,null,null);e["default"]=q.exports},"4e53":function(t,e,i){var n=i("e916");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=i("499e").default;s("0d7b84c8",n,!1,{sourceMap:!1})},"5fa6":function(t,e,i){"use strict";var n=i("4e53"),s=i.n(n);s.a},"7eb4":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{attrs:{value:t.value,maximized:t.maximized&&!t.minimized.state,persistent:"",seamless:t.minimized.state,position:t.minimized.state?"bottom":"standard","content-class":t.minimized.state?"dialog-window-minimized q-pa-none":null,"transition-hide":t.minimized.state?"slide-down":"scale"},on:{input:t.update,hide:t.reset}},[t.minimized.state?i("q-bar",{staticClass:"bg-primary text-white cursor-pointer rounded-borders overflow-hidden ellipsis",style:"width: 250px; margin-left: "+250*(null===t.minimized.slot?0:t.minimized.slot)+"px;",on:{click:t.restore}},[i("div",{staticClass:"ellipsis"},[t._v("\n      "+t._s(t.title)+"\n    ")]),i("q-space"),i("q-btn-group",{attrs:{flat:""}},[i("q-btn",{staticClass:"window-minimize",attrs:{flat:"",icon:"mdi-window-minimize",dense:"",disable:t.minimized.state}}),i("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(t.maximized?"maximize":"restore")}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}}})],1)],1):[i("div",{staticClass:"bg-white",style:t.maximized?"":"max-width: none; min-width: 560px"},[i("q-bar",{staticClass:"bg-primary text-white"},[i("div",{staticClass:"ellipsis"},[t._v("\n          "+t._s(t.title)+"\n        ")]),i("q-space"),i("q-btn",{staticClass:"window-minimize",attrs:{flat:"",dense:"",icon:"mdi-window-minimize"},on:{click:t.minimize}}),i("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(t.maximized?"restore":"maximize")},on:{click:t.toggle}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),i("main",{staticClass:"scroll",style:t.maximized?"max-height: calc(100vh - 32px);":"max-height: calc(100vh - 80px);"},[t._t("default")],2)],1)]],2)},s=[],a=(i("6762"),i("2fdb"),i("4db1")),o=i.n(a),r={name:"DialogWindow",props:{title:{type:String,default:""},value:{type:Boolean,required:!0}},data:function(){return{minimized:{state:!1,slots:[],slot:null},maximized:!1}},computed:{toggleIcon:function(){return this.minimized.state?this.maximized?"maximize":"restore":this.maximized?"restore":"maximize"},nextSlot:function(){var t=this;return Math.min.apply(Math,o()(this.minimized.slots.map(function(t,e){return e}).filter(function(e){return!t.minimized.slots.includes(e)})).concat([this.minimized.slots.length]))}},methods:{unbindSlot:function(){this.$root.$emit("DIALOG_WINDOW_RESTORED",this.minimized.slot),this.minimized.slot=null},bindSlot:function(){this.minimized.slot=this.nextSlot,this.$root.$emit("DIALOG_WINDOW_MINIMIZED",this.minimized.slot)},onBindSlot:function(t){this.minimized.slots.push(t)},onUnbindSlot:function(t){this.minimized.slots=this.minimized.slots.filter(function(e){return e!==t})},reset:function(){this.maximized=!1,this.minimizedId=0,null!==this.minimized.slot&&this.unbindSlot(),this.minimized.state=!1},minimize:function(){this.bindSlot(),this.minimized.state=!0},restore:function(){this.minimized.state=!1,this.unbindSlot()},toggle:function(){this.minimized.state?this.restore():this.maximized=!this.maximized},update:function(t){this.$emit("input",t)}},created:function(){this.$root.$on("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$on("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)},beforeDestroy:function(){null!==this.minimized.slot&&this.unbindSlot(),this.$root.$off("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$off("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)}},l=r,c=(i("5fa6"),i("2877")),d=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=d.exports},e916:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,".q-btn.window-minimize .q-icon:before{margin-top:45%;height:45%}.q-dialog.dialog-window-minimized>.q-dialog__inner{justify-content:left}",""])}}]);