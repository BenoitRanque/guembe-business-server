(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7430e516"],{"4e53":function(t,i,e){var n=e("e916");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("499e").default;o("0d7b84c8",n,!1,{sourceMap:!1})},"5fa6":function(t,i,e){"use strict";var n=e("4e53"),o=e.n(n);o.a},"6eb0":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",[e("q-btn",{on:{click:function(i){t.showCreateProductDialog=!0}}},[t._v("\n    Crear Producto nuevo\n  ")]),e("q-list",t._l(t.products,function(i,n){return e("q-item",{key:n,attrs:{clickable:"",to:"/product/"+i.product_id}},[e("q-item-section",[e("q-item-label",{attrs:{lines:1}},[t._v("\n          "+t._s(i.name)+"\n        ")])],1)],1)}),1),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner")],1),e("dialog-window",{attrs:{title:"Crear Producto"},model:{value:t.showCreateProductDialog,callback:function(i){t.showCreateProductDialog=i},expression:"showCreateProductDialog"}},[e("create-product")],1)],1)},o=[],s=e("967e"),r=e.n(s),a=(e("96cf"),e("fa84")),c=e.n(a),l=e("7eb4"),d=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-form",{staticClass:"q-gutter-y-md",on:{submit:t.submit,reset:t.reset}},[e("q-input",{attrs:{filled:"",required:"",label:"Nombre Privado",hint:"Nombre de uso interno","lazy-rules":"",rules:[]},model:{value:t.product.name,callback:function(i){t.$set(t.product,"name",i)},expression:"product.name"}}),e("q-input",{attrs:{filled:"",label:"Codigo de uso Interno",hint:"Codigo interno del producto","lazy-rules":"",rules:[]},model:{value:t.product.internal_product_id,callback:function(i){t.$set(t.product,"internal_product_id",i)},expression:"product.internal_product_id"}}),e("q-select",{attrs:{filled:"",required:"",label:"Actividad Economica",hint:"Rubro del producto",options:t.options.economic_activity,"lazy-rules":"",rules:[]},model:{value:t.product.economic_activity_id,callback:function(i){t.$set(t.product,"economic_activity_id",i)},expression:"product.economic_activity_id"}}),e("q-separator"),e("div",{staticClass:"row justify-around q-pa-md"},[e("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[t._v("reset")]),e("q-btn",{attrs:{color:"primary",type:"submit"}},[t._v("Crear")])],1),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner")],1)],1)},u=[],m=e("f3e3"),p=e.n(m),h=e("02fa"),f=e.n(h),_=(e("7f7f"),{name:"CreateProduct",data:function(){return{loading:!1,options:{economic_activity:[]},product:{name:"",economic_activity_id:null,internal_product_id:null}}},methods:{reset:function(){this.product.name="",this.product.economic_activity_id=null,this.product.internal_product_id=null},submit:function(){this.$q.dialog({title:"Confirmar",message:"Este registro no puede modificicarse luego de la creacion",persistent:!0,cancel:!0}).onOk(this.createProduct)},createProduct:function(){var t=c()(r.a.mark(function t(){var i,e,n,o,s,a,c;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="mutation ($objects: [webstore_product_insert_input!]!) {\n        insert: insert_webstore_product (objects: $objects) {\n          affected_rows\n          products: returning {\n            id: product_id\n            name: name\n          }\n        }\n      }",e={objects:f()({},this.product,{economic_activity_id:this.product.economic_activity_id.value})},t.prev=2,this.loading=!0,t.next=6,this.$gql(i,e,{role:"administrator"});case 6:n=t.sent,o=p()(n.insert.products,1),s=o[0],a=s.id,c=s.name,this.$q.notify({icon:"mdi-check",color:"positive",message:"Producto ".concat(c," Creado Exitosamente")}),this.$router.push("/product/".concat(a)),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 18:return t.prev=18,this.loading=!1,t.finish(18);case 21:case"end":return t.stop()}},t,this,[[2,15,18,21]])}));function i(){return t.apply(this,arguments)}return i}(),loadOptions:function(){var t=c()(r.a.mark(function t(){var i,e,n,o;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="query {\n        economic_activity: accounting_economic_activity {\n          value: economic_activity_id\n          label: name\n        }\n      }",e={},t.prev=2,this.loading=!0,t.next=6,this.$gql(i,e,{role:"administrator"});case 6:n=t.sent,o=n.economic_activity,this.options.economic_activity=o,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,11,14,17]])}));function i(){return t.apply(this,arguments)}return i}()},mounted:function(){this.loadOptions()}}),v=_,b=e("2877"),g=Object(b["a"])(v,d,u,!1,null,null,null),w=g.exports,z={name:"Products",components:{DialogWindow:l["a"],CreateProduct:w},data:function(){return{showCreateProductDialog:!1,products:[],loading:!1}},methods:{refreshData:function(){var t=c()(r.a.mark(function t(){var i,e,n,o;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i="query {\n        data: webstore_product (order_by: { created_at: desc }) {\n          product_id\n          name\n        }\n      }",e={},t.prev=2,this.loading=!1,t.next=6,this.$gql(i,e,{role:"administrator"});case 6:n=t.sent,o=n.data,this.products=o,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),this.$gql.handleError(t.t0);case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,11,14,17]])}));function i(){return t.apply(this,arguments)}return i}()},mounted:function(){this.refreshData()}},q=z,x=Object(b["a"])(q,n,o,!1,null,null,null);i["default"]=x.exports},"7eb4":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-dialog",{attrs:{value:t.value,maximized:t.maximized&&!t.minimized.state,persistent:"",seamless:t.minimized.state,position:t.minimized.state?"bottom":"standard","content-class":t.minimized.state?"dialog-window-minimized q-pa-none":null,"transition-hide":t.minimized.state?"slide-down":"scale"},on:{input:t.update,hide:t.reset}},[t.minimized.state?e("q-bar",{staticClass:"bg-primary text-white cursor-pointer rounded-borders overflow-hidden ellipsis",style:"width: 250px; margin-left: "+250*(null===t.minimized.slot?0:t.minimized.slot)+"px;",on:{click:t.restore}},[e("div",{staticClass:"ellipsis"},[t._v("\n      "+t._s(t.title)+"\n    ")]),e("q-space"),e("q-btn-group",{attrs:{flat:""}},[e("q-btn",{staticClass:"window-minimize",attrs:{flat:"",icon:"mdi-window-minimize",dense:"",disable:t.minimized.state}}),e("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(t.maximized?"maximize":"restore")}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}}})],1)],1):[e("div",{staticClass:"bg-white",style:t.maximized?"":"max-width: none; min-width: 560px"},[e("q-bar",{staticClass:"bg-primary text-white"},[e("div",{staticClass:"ellipsis"},[t._v("\n          "+t._s(t.title)+"\n        ")]),e("q-space"),e("q-btn",{staticClass:"window-minimize",attrs:{flat:"",dense:"",icon:"mdi-window-minimize"},on:{click:t.minimize}}),e("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(t.maximized?"restore":"maximize")},on:{click:t.toggle}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),e("main",{staticClass:"scroll",style:t.maximized?"max-height: calc(100vh - 32px);":"max-height: calc(100vh - 80px);"},[t._t("default")],2)],1)]],2)},o=[],s=(e("6762"),e("2fdb"),e("4db1")),r=e.n(s),a={name:"DialogWindow",props:{title:{type:String,default:""},value:{type:Boolean,required:!0}},data:function(){return{minimized:{state:!1,slots:[],slot:null},maximized:!1}},computed:{toggleIcon:function(){return this.minimized.state?this.maximized?"maximize":"restore":this.maximized?"restore":"maximize"},nextSlot:function(){var t=this;return Math.min.apply(Math,r()(this.minimized.slots.map(function(t,i){return i}).filter(function(i){return!t.minimized.slots.includes(i)})).concat([this.minimized.slots.length]))}},methods:{unbindSlot:function(){this.$root.$emit("DIALOG_WINDOW_RESTORED",this.minimized.slot),this.minimized.slot=null},bindSlot:function(){this.minimized.slot=this.nextSlot,this.$root.$emit("DIALOG_WINDOW_MINIMIZED",this.minimized.slot)},onBindSlot:function(t){this.minimized.slots.push(t)},onUnbindSlot:function(t){this.minimized.slots=this.minimized.slots.filter(function(i){return i!==t})},reset:function(){this.maximized=!1,this.minimizedId=0,null!==this.minimized.slot&&this.unbindSlot(),this.minimized.state=!1},minimize:function(){this.bindSlot(),this.minimized.state=!0},restore:function(){this.minimized.state=!1,this.unbindSlot()},toggle:function(){this.minimized.state?this.restore():this.maximized=!this.maximized},update:function(t){this.$emit("input",t)}},created:function(){this.$root.$on("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$on("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)},beforeDestroy:function(){null!==this.minimized.slot&&this.unbindSlot(),this.$root.$off("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$off("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)}},c=a,l=(e("5fa6"),e("2877")),d=Object(l["a"])(c,n,o,!1,null,null,null);i["a"]=d.exports},e916:function(t,i,e){i=t.exports=e("24fb")(!1),i.push([t.i,".q-btn.window-minimize .q-icon:before{margin-top:45%;height:45%}.q-dialog.dialog-window-minimized>.q-dialog__inner{justify-content:left}",""])}}]);