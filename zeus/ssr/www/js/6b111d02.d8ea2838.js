(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6b111d02"],{"4e53":function(e,i,t){var n=t("e916");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=t("499e").default;a("0d7b84c8",n,!1,{sourceMap:!1})},"5fa6":function(e,i,t){"use strict";var n=t("4e53"),a=t.n(n);a.a},"7eb4":function(e,i,t){"use strict";var n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-dialog",{attrs:{value:e.value,maximized:e.maximized&&!e.minimized.state,persistent:"",seamless:e.minimized.state,position:e.minimized.state?"bottom":"standard","content-class":e.minimized.state?"dialog-window-minimized q-pa-none":null,"transition-hide":e.minimized.state?"slide-down":"scale"},on:{input:e.update,hide:e.reset}},[e.minimized.state?t("q-bar",{staticClass:"bg-primary text-white cursor-pointer rounded-borders overflow-hidden ellipsis",style:"width: 250px; margin-left: "+250*(null===e.minimized.slot?0:e.minimized.slot)+"px;",on:{click:e.restore}},[t("div",{staticClass:"ellipsis"},[e._v("\n      "+e._s(e.title)+"\n    ")]),t("q-space"),t("q-btn-group",{attrs:{flat:""}},[t("q-btn",{staticClass:"window-minimize",attrs:{flat:"",icon:"mdi-window-minimize",dense:"",disable:e.minimized.state}}),t("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(e.maximized?"maximize":"restore")}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}})],1)],1):[t("div",{staticClass:"bg-white",style:e.maximized?"":"max-width: none; min-width: 560px"},[t("q-bar",{staticClass:"bg-primary text-white"},[t("div",{staticClass:"ellipsis"},[e._v("\n          "+e._s(e.title)+"\n        ")]),t("q-space"),t("q-btn",{staticClass:"window-minimize",attrs:{flat:"",dense:"",icon:"mdi-window-minimize"},on:{click:e.minimize}}),t("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-window-"+(e.maximized?"restore":"maximize")},on:{click:e.toggle}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"mdi-close"}})],1),t("main",{staticClass:"scroll",style:e.maximized?"max-height: calc(100vh - 32px);":"max-height: calc(100vh - 80px);"},[e._t("default")],2)],1)]],2)},a=[],s=(t("6762"),t("2fdb"),t("4db1")),l=t.n(s),o={name:"DialogWindow",props:{title:{type:String,default:""},value:{type:Boolean,required:!0}},data:function(){return{minimized:{state:!1,slots:[],slot:null},maximized:!1}},computed:{toggleIcon:function(){return this.minimized.state?this.maximized?"maximize":"restore":this.maximized?"restore":"maximize"},nextSlot:function(){var e=this;return Math.min.apply(Math,l()(this.minimized.slots.map(function(e,i){return i}).filter(function(i){return!e.minimized.slots.includes(i)})).concat([this.minimized.slots.length]))}},methods:{unbindSlot:function(){this.$root.$emit("DIALOG_WINDOW_RESTORED",this.minimized.slot),this.minimized.slot=null},bindSlot:function(){this.minimized.slot=this.nextSlot,this.$root.$emit("DIALOG_WINDOW_MINIMIZED",this.minimized.slot)},onBindSlot:function(e){this.minimized.slots.push(e)},onUnbindSlot:function(e){this.minimized.slots=this.minimized.slots.filter(function(i){return i!==e})},reset:function(){this.maximized=!1,this.minimizedId=0,null!==this.minimized.slot&&this.unbindSlot(),this.minimized.state=!1},minimize:function(){this.bindSlot(),this.minimized.state=!0},restore:function(){this.minimized.state=!1,this.unbindSlot()},toggle:function(){this.minimized.state?this.restore():this.maximized=!this.maximized},update:function(e){this.$emit("input",e)}},created:function(){this.$root.$on("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$on("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)},beforeDestroy:function(){null!==this.minimized.slot&&this.unbindSlot(),this.$root.$off("DIALOG_WINDOW_MINIMIZED",this.onBindSlot),this.$root.$off("DIALOG_WINDOW_RESTORED",this.onUnbindSlot)}},r=o,d=(t("5fa6"),t("2877")),m=Object(d["a"])(r,n,a,!1,null,null,null);i["a"]=m.exports},"847e":function(e,i,t){"use strict";t.r(i);var n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-page",{attrs:{padding:""}},[t("q-btn",{attrs:{color:"accent"},on:{click:function(i){e.showCreateLifetimeDialog=!0}}},[e._v("\n    Crear vigencia nueva\n  ")]),t("q-list",e._l(e.lifetimes,function(i,n){return t("q-item",{key:n,attrs:{clickable:"",to:"/lifetime/"+i.lifetime_id}},[t("q-item-section",[t("q-item-label",{attrs:{lines:1}},[e._v("\n          "+e._s(i.public_name)+"\n        ")]),t("q-item-label",{attrs:{caption:"",lines:2}},[e._v("\n          "+e._s(i.description)+"\n        ")])],1)],1)}),1),t("q-inner-loading",{attrs:{showing:e.loading}},[t("q-spinner")],1),t("dialog-window",{attrs:{title:"Crear Vigencia"},model:{value:e.showCreateLifetimeDialog,callback:function(i){e.showCreateLifetimeDialog=i},expression:"showCreateLifetimeDialog"}},[t("create-lifetime")],1)],1)},a=[],s=t("967e"),l=t.n(s),o=(t("96cf"),t("fa84")),r=t.n(o),d=t("7eb4"),m=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-form",{staticClass:"q-gutter-y-md",on:{submit:e.submit,reset:e.reset}},[t("q-input",{attrs:{filled:"",required:"",label:"Nombre Privado",hint:"Nombre de uso interno","lazy-rules":"",rules:[function(e){return!!(e&&e.length>0)||"Campo Obligatorio"}]},model:{value:e.lifetime.name,callback:function(i){e.$set(e.lifetime,"name",i)},expression:"lifetime.name"}}),t("q-input",{attrs:{filled:"",required:"",label:"Inicio de vigencia",hint:"El vigencia sera valido a partir de esta fecha","lazy-rules":"",mask:"date",rules:["date"]},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-calendar"}},[t("q-popup-proxy",[t("q-date",{attrs:{"today-btn":""},model:{value:e.lifetime.start,callback:function(i){e.$set(e.lifetime,"start",i)},expression:"lifetime.start"}})],1)],1)]},proxy:!0}]),model:{value:e.lifetime.start,callback:function(i){e.$set(e.lifetime,"start",i)},expression:"lifetime.start"}}),t("q-input",{attrs:{filled:"",label:"Fin de vigencia",hint:"El vigencia sera valido hasta esta fecha","lazy-rules":"",mask:"date",rules:[function(e){return null!==e||"Campo Obligatorio"},"date",function(i){return null!==e.lifetime.start&&new Date(i)>=new Date(e.lifetime.start)||"Fin de tiempo de validez debe ser igual o superio a inicio de validez"}]},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"mdi-calendar"}},[t("q-popup-proxy",[t("q-date",{attrs:{"today-btn":""},model:{value:e.lifetime.end,callback:function(i){e.$set(e.lifetime,"end",i)},expression:"lifetime.end"}})],1)],1)]},proxy:!0}]),model:{value:e.lifetime.end,callback:function(i){e.$set(e.lifetime,"end",i)},expression:"lifetime.end"}}),t("q-select",{attrs:{filled:"",label:"Dias de validez",hint:"La vigencia sera valida para estos dias",options:e.options.weekdays,multiple:"","lazy-rules":"",rules:[function(e){return e.length>0||"Debe selecionar algunos dias de validez"}]},model:{value:e.lifetime.lifetime_weekdays,callback:function(i){e.$set(e.lifetime,"lifetime_weekdays",i)},expression:"lifetime.lifetime_weekdays"}}),t("q-checkbox",{attrs:{label:"Incluye Feriados"},model:{value:e.lifetime.include_holidays,callback:function(i){e.$set(e.lifetime,"include_holidays",i)},expression:"lifetime.include_holidays"}}),t("q-separator"),t("div",{staticClass:"row justify-around q-pa-md"},[t("q-btn",{attrs:{color:"secondary",flat:"",type:"reset"}},[e._v("reset")]),t("q-btn",{attrs:{color:"primary",type:"submit"}},[e._v("Crear")])],1),t("q-inner-loading",{attrs:{showing:e.loading}},[t("q-spinner")],1)],1)},c=[],u=t("f3e3"),f=t.n(u),p=t("02fa"),h=t.n(p),b=(t("7f7f"),{name:"CreateLifetime",data:function(){return{loading:!1,options:{weekdays:[]},lifetime:{name:"",lifetime_weekdays:[],start:null,end:null,include_holidays:!1}}},methods:{reset:function(){this.lifetime.name="",this.lifetime.lifetime_weekdays=[],this.lifetime.start=null,this.lifetime.end=null,this.lifetime.include_holidays=!1},submit:function(){this.$q.dialog({title:"Confirmar",message:"Este registro no puede modificicarse luego de la creacion",persistent:!0,cancel:!0}).onOk(this.createLifetime)},createLifetime:function(){var e=r()(l.a.mark(function e(){var i,t,n,a,s,o,r;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i="mutation ($objects: [calendar_lifetime_insert_input!]!) {\n        insert: insert_calendar_lifetime (objects: $objects) {\n          affected_rows\n          lifetimes: returning {\n            id: lifetime_id\n            name\n          }\n        }\n      }",t={objects:h()({},this.lifetime,{lifetime_weekdays:{data:this.lifetime.lifetime_weekdays.map(function(e){var i=e.value;return{weekday_id:i}})}})},e.prev=2,this.loading=!0,e.next=6,this.$gql(i,t,{role:"administrator"});case 6:n=e.sent,a=f()(n.insert.lifetimes,1),s=a[0],o=s.id,r=s.name,this.$q.notify({icon:"mdi-check",color:"positive",message:"Vigencia ".concat(r," Creada Exitosamente")}),this.$router.push("/lifetime/".concat(o)),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}},e,this,[[2,15,18,21]])}));function i(){return e.apply(this,arguments)}return i}(),loadOptions:function(){var e=r()(l.a.mark(function e(){var i,t,n,a;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i="query {\n        weekdays: calendar_weekday {\n          value: weekday_id\n          label: name\n        }\n      }",t={},e.prev=2,this.loading=!0,e.next=6,this.$gql(i,t,{role:"administrator"});case 6:n=e.sent,a=n.weekdays,this.options.weekdays=a,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[2,11,14,17]])}));function i(){return e.apply(this,arguments)}return i}()},mounted:function(){this.loadOptions()}}),v=b,g=t("2877"),w=Object(g["a"])(v,m,c,!1,null,null,null),_=w.exports,z={name:"Lifetimes",components:{CreateLifetime:_,DialogWindow:d["a"]},data:function(){return{showCreateLifetimeDialog:!1,lifetimes:[],loading:!1}},methods:{refreshData:function(){var e=r()(l.a.mark(function e(){var i,t,n,a;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i="query {\n        data: calendar_lifetime (order_by: { end: desc }) {\n          lifetime_id\n          name\n        }\n      }",t={},e.prev=2,this.loading=!1,e.next=6,this.$gql(i,t,{role:"administrator"});case 6:n=e.sent,a=n.data,this.lifetimes=a,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),this.$gql.handleError(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[2,11,14,17]])}));function i(){return e.apply(this,arguments)}return i}()},mounted:function(){this.refreshData()}},q=z,y=Object(g["a"])(q,n,a,!1,null,null,null);i["default"]=y.exports},e916:function(e,i,t){i=e.exports=t("24fb")(!1),i.push([e.i,".q-btn.window-minimize .q-icon:before{margin-top:45%;height:45%}.q-dialog.dialog-window-minimized>.q-dialog__inner{justify-content:left}",""])}}]);