(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["a0bcc664"],{"36fb":function(n,e,i){"use strict";i.r(e);var a=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",[i("q-btn",{on:{click:n.goToPayment}},[n._v("Ir a Pago")]),i("q-btn",{on:{click:n.verifyPayment}},[n._v("Verificar Pago")]),n.sale?[i("q-expansion-item",{attrs:{label:"Compra"}},[i("pre",[n._v(n._s(n.sale.sale_listings))])]),i("q-expansion-item",{attrs:{label:"Pago"}},[i("pre",[n._v(n._s(n.sale.sale_payment))])]),i("q-expansion-item",{attrs:{label:"Facturas"}},[i("pre",[n._v(n._s(n.sale.sale_invoices))])]),i("q-expansion-item",{attrs:{label:"Vouchers"}},[i("pre",[n._v(n._s(n.sale.vouchers))])])]:n._e()],2)},t=[],r=i("967e"),s=i.n(r),o=(i("96cf"),i("fa84")),l=i.n(o),c=i("b06b"),p={name:"Sale",props:{SaleId:{type:String,required:!0}},data:function(){return{sale:null}},methods:{goToPayment:function(){Object(c["a"])(this.sale.sale_payment.payment[this.$q.platform.is.mobile?"khipu_app_url":"khipu_payment_url"])},verifyPayment:function(){var n=l()(s.a.mark(function n(){return s.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,this.loading=!0,n.next=4,this.$api.post("/store/verifyPayment/".concat(this.sale.sale_payment.payment.payment_id));case 4:this.$nextTick(this.loadSale),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),this.$api.handleError(n.t0);case 10:return n.prev=10,this.loading=!1,n.finish(10);case 13:case"end":return n.stop()}},n,this,[[0,7,10,13]])}));function e(){return n.apply(this,arguments)}return e}(),loadSale:function(){var n=l()(s.a.mark(function n(){var e,i,a,t;return s.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return e='query ($sale_id: uuid!) {\n        sale: webstore_sale_by_pk (sale_id: $sale_id) {\n          sale_id\n          total\n          client {\n            business_name\n            tax_identification_number\n          }\n          sale_payment {\n            payment {\n              payment_id\n              amount\n              status\n              khipu_payment_url\n              khipu_app_url\n            }\n          }\n          sale_invoices {\n            invoice {\n              invoice_id\n              economic_activity_id\n              invoice_items (order_by: { index: asc }) {\n                index\n                name\n                price\n                quantity\n              }\n              izi_autorizacion\n              izi_comprador\n              izi_control\n              izi_link\n            }\n          }\n          sale_listings {\n            listing {\n              listing_id\n              total\n              i18n (where: { locale_id: { _eq: "es"} }) {\n                name\n                description\n              }\n              listing_products {\n                product {\n                  product_id\n                  i18n (where: { locale_id: { _eq: "es"} }) {\n                    name\n                    description\n                  }\n                }\n                quantity\n                price\n              }\n              lifetime {\n                lifetime_id\n                start\n                end\n                include_holidays\n                i18n (where: { locale_id: { _eq: "es"} }) {\n                  name\n                  description\n                }\n                lifetime_weekdays {\n                  weekday {\n                    i18n (where: { locale_id: { _eq: "es"} }) {\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            quantity\n          }\n          vouchers {\n            listing {\n              listing_id\n              total\n              i18n (where: { locale_id: { _eq: "es"} }) {\n                name\n                description\n              }\n            }\n            aquired\n            voucher_products {\n              product {\n                product_id\n                i18n (where: { locale_id: { _eq: "es"} }) {\n                  name\n                  description\n                }\n              }\n              quantity\n            }\n          }\n        }\n      }',i={sale_id:this.SaleId},n.prev=2,this.loading=!0,n.next=6,this.$gql(e,i);case 6:a=n.sent,t=a.sale,this.sale=t,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),this.$gql.handleError(n.t0);case 14:return n.prev=14,this.loading=!1,n.finish(14);case 17:case"end":return n.stop()}},n,this,[[2,11,14,17]])}));function e(){return n.apply(this,arguments)}return e}()},mounted:function(){this.loadSale()}},d=p,u=i("2877"),_=Object(u["a"])(d,a,t,!1,null,null,null);e["default"]=_.exports},b06b:function(n,e,i){"use strict";var a=i("0967"),t=i("2b0e");e["a"]=function(n,e){var i=window.open;if(!0===a["a"].is.cordova){if(void 0!==cordova&&void 0!==cordova.InAppBrowser&&void 0!==cordova.InAppBrowser.open)i=cordova.InAppBrowser.open;else if(void 0!==navigator&&void 0!==navigator.app)return navigator.app.loadUrl(n,{openExternal:!0})}else if(void 0!==t["a"].prototype.$q.electron)return t["a"].prototype.$q.electron.shell.openExternal(n);var r=i(n,"_blank");if(r)return r.focus(),r;e&&e()}}}]);