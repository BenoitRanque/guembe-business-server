const sharp = require('sharp')

module.exports = async function getPlaceholder(imageBuffer, { width: orignalWidth, height: originalHeight }) {
  const placeholderWidth = 24
  const placeholderHeight = Math.round(placeholderWidth * originalHeight / orignalWidth)

  const placeholderBuffer = await sharp(imageBuffer)
    .resize(placeholderWidth, placeholderHeight)
    .blur(2)
    .toBuffer()

  return `data:image/jpg;base64,${placeholderBuffer.toString('base64')}`
}