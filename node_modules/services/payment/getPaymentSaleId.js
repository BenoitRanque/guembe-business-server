const pg = require('utils/pg')

module.exports = async function ({ payment_id }, pgClient = null) {
  const db = pgClient === null ? pg : pgClient

  const { rows: [ { sale_id } ] } = await db.query(/*sql*/`
    SELECT sale_id
    FROM webstore.sale_payment
    WHERE webstore.sale_payment.payment_id = $1
  `, [ payment_id ])

  return sale_id
}
